<?php

require_once 'controllers/mysqlController.php';

$REQUEST = $_SERVER['REQUEST_URI'];
$PATH    = __DIR__;

$queryString = parse_url($REQUEST, PHP_URL_QUERY);

// Initialize $_GET array
$_GET = [];

// Populate $_GET with the query parameters
if (!empty($queryString)) {
    parse_str($queryString, $_GET);
}

$path = preg_match('/^\/path.*$/', $REQUEST) ? $REQUEST : '/path';

// Handle requests
switch ($REQUEST) {
    case '/':
        require_once $PATH . '/views/main.php';
        break;

    case '/robots.txt':
        require_once $PATH . '/robots.txt';
        break;

    case '/logout':
        require_once $PATH . '/views/logout.php';
        break;

    case '/login':
        require_once $PATH . '/views/login.php';
        break;

    case '/register':
        require_once $PATH . '/views/register.php';
        break;

    case '/upload':
        require_once $PATH . '/views/upload.php';
        break;

    case $path:
        require_once $PATH . '/views/traversal.php';
        break;
        
    default:
        require_once $PATH . '/views/404.php';
        break;
}
