require('dotenv').config();
const { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } = require("@google/generative-ai");

// Create ai model
const API = process.env.API_KEY
console.log("API Key:", API);
const genAI = new GoogleGenerativeAI(API);

// Function for prompt
async function generativeAI(prompt) {
  const model = genAI.getGenerativeModel({ 
    model: "gemini-pro",
    safetySettings: [
      {
        category: HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,
        threshold: HarmBlockThreshold.BLOCK_NONE,
      },
      {
        category: HarmCategory.HARM_CATEGORY_HARASSMENT,
        threshold: HarmBlockThreshold.BLOCK_NONE
      },
      {
        category: HarmCategory.HARM_CATEGORY_HATE_SPEECH,
        threshold: HarmBlockThreshold.BLOCK_NONE
      },
      {
        category: HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT,
        threshold: HarmBlockThreshold.BLOCK_NONE
      },
    ],
  });

  const result = await model.generateContent(prompt);
  const response = await result.response;
  const text = await response.text();
  return text;
}



module.exports = generativeAI;